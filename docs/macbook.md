# Macbook

Статья будет об установке Alt Regular Gnome, как завести все устройства и настроить систему, чтобы она жила на уровне с MacOS (никакой магии нет, есть только настройки)
Статья охватывает только установку автора на Macbook 11,1 он же Macbook Pro 13" Late 2013

## Установка
Настоятельно рекомедую, возьми диск или nas или ещё что либо равное объёму диска макбука и сделай TimeMachine резервную копию. 
Линукс это круто и без возвратный прыжок в этот мир, может помочь бороться с трудностями, но лучше иметь бекап, чем не иметь. 
Восстановится можно будет в тот же день, в котором начали - синяя таблетка нео и ты никогда не узнаешь суровой реальности Linux.

0. Качаем образ и пишем на флешку
1. Выключаем мак и подключаем флешку
2. Включаем мак с зажатой клавишей [alt/option]
3. На этапе выбора нам нужен жёлтый диск с странным названием EFI, это наш
4. Далее устанавливаем, как на обычным PC, никакой разницы.

## Настройка

Настраивать нам нужно многое, но всё не так страшно. Для начала нам нужна сеть

### WiFi
Прошли те времена, когда это вызывало боль, на сегодня Broadcom даёт свои драйвера под распространение, нам нужно их только установить:

```shell
$ su -
# apt-get install kernel-modules-bcmwl-un-def
# apt-get insall bcmwl-kernel-conf
# reboot
```
> Источник: https://www.altlinux.org/Wi-fi_Broadcom (данные по поддержке устарели) 

После перезагрузки появиться возможность подключиться и использовать wifi.

### Улучшаем энергосбережение

0. Перво-наперво - заходим в меню в правом верхнем углу и выбираем энергосбережение.

1. PC6/PC7 состояния CPU 
Для начала, нам нужно сказать маку, что мы не притворяемся linux или windows, мы вообще macos, ну почти.
И это разблокирует возможности переключаться в состояния PC6 и PC7, то что даст нам 5-7W потребления и почти 10ч от батреи, как на MacOS 

```shell
su -
mcedit /etc/default/grub
```

Добавляем в параметр GRUB_CMDLINE_LINUX_DEFAULT значение в конец `acpi_osi=` прям вот так, пустой. И сохраняем.

`grub-mkconfig -o /boot/grub/grub.cfg` обновляем GRUB с новой конфигурацией и перезагружаемся

Источник: https://www.jonayling.net/battery-life-under-linux/

2. Powertop нам друг
```shell
su -l
powertop
```
Табом дойти до tunable вкладки, заодно можете полюбоваться Idle State в левом столбце Pkg(HW) должны быть проценты не нулевые у C6/C7
Дойдя до Tunable - пробелом протыкиваем всё Bad в Good кроме клавиатуры и трекпадом иначе может не выходить из сна.

Так мы уже разительно снизили потребление 

#ToDo Facetime Camera
#ToDo tune kernel - стабильно дойти до PC7
#ToDo tune планировщиков для улучшениея жизни от батареи
