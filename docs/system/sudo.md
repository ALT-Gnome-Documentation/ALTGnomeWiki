# SUDO

Sudo (su “do”) — позволяет пользователю с привелигированными права делегировать полномочия, чтобы предоставить определенным пользователям (или группам пользователей) возможность запускать некоторые (или все) команды от имени root или другого пользователя, предоставляя журнал аудита команд и их аргументов.

## Быстрая настройка sudo

Для быстрого разрешения всех привелигированных прав пользователям входящее в группу `wheel`:

```shell
su -
control sudowheel enabled
exit
```

Проверим, результат, наберем `sudo -l`, необходимо вывести пароль для подтверждение операции: 

::: details Пользователю `oleg` присвоенны привелегированные права:
```
Соответствие записей Defaults для oleg на alt-gnome:
    env_keep+="DISPLAY XAUTHORITY"

Пользователь oleg может выполнять следующие
        команды на alt-gnome:
    (ALL) ALL
```
:::

Для запрета всех привелигированных прав пользователям входящее в группы `wheel`:

```shell
su -
control sudowheel disabled
exit
```

Проверим, результат, наберем `sudo -l`: 

::: details У пользователя `oleg` отсутствует привелегированные права:
```
Извините, пользователь oleg не может запустить sudo на alt-gnome.
```
:::


## Детальная настройка sudo

Разрешить все привелигированные права для пользователя `oleg` на устройстве `alt-gnome`

```shell
oleg alt-gnome=(ALL) ALL
```

Разрешить определенные комманды (apt-get, rpm, fdisk) для пользователя `oleg` на устройстве `localhost`

```shell
oleg alt-gnome=(ALL) /usr/bin/apt-get,/usr/bin/rpm,/sbin/fdisk
```

Разрещить все привелегированные права для пользователей входящую в группу `wheel`

```shell
WHEEL_USERS ALL=(ALL) ALL
```

Создадим правило в файле `10-oleg` размещенный в директории `/etc/sudoers.d/`:

```shell
su -
echo "oleg alt-gnome=(ALL) ALL" >> /etc/sudoers.d/10-oleg
exit
```

Проверим, результат, наберем `sudo -l`, необходимо вывести пароль для подтверждение операции: 

::: details Пользователю `oleg` присвоенны привелегированные права:
```
Соответствие записей Defaults для oleg на alt-gnome:
    env_keep+="DISPLAY XAUTHORITY"

Пользователь oleg может выполнять следующие
        команды на alt-gnome:
    (ALL) ALL
```
:::

## Полезные команды при настройке sudo

Разрешены привелигированные права пользователю:

```shell
sudo -l
```

:::info
Необходимо быть авторизированным под пользователем для которого вы хотите проверить cтатус
:::

Добавить пользователя `oleg` в группу `wheel`:

```shell
gpasswd -a oleg wheel
```

Узнать имя устройства через терминал:

```shell
hostname
```

::: details Пример ответа hostname:
```
alt-gnome.
```
:::
